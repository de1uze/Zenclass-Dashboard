{"ast":null,"code":"var _jsxFileName = \"/Users/de1uze/Desktop/capstone_final/Zenclass-Dashboard-frontend/src/containers/Dashboard/index.js\",\n    _s = $RefreshSig$();\n\nimport { Navigate, Route, Routes } from \"react-router-dom\";\nimport { useEffect, useState } from \"react\";\nimport { API } from \"../../global\";\nimport { CourseBarChart } from \"./CourseBarChart\";\nimport { PieRechartComponent } from \"./CoursePieChart\";\nimport \"./dashboard.css\";\nimport { DashboardCard } from \"./Cards\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function Dashboard() {\n  _s();\n\n  const [userCourseDetails, setUserCourseDetails] = useState([]);\n  const [userTaskDetails, setUserTaskDetails] = useState([]);\n  const [dashboardCount, setDashboardCount] = useState({});\n  const [courseStatus, setCourseStatus] = useState([]);\n  let userDetails = localStorage.getItem(\"user\");\n  userDetails = userDetails && JSON.parse(userDetails);\n  const userId = userDetails.userId;\n  const userName = userDetails.userName;\n  const token = userDetails.token;\n  useEffect(() => {\n    getUserCourseDetails();\n    getUserTaskDetails();\n    getAllCount();\n  }, []);\n\n  async function getUserCourseDetails() {\n    const courseDetails = await fetch(`${API}/courses/userCourses/${userId}`, {\n      headers: {\n        \"x-auth-token\": token\n      }\n    }).then(data => data.json());\n    console.log(\"courseDetails\", courseDetails);\n    consolidateCourseStatus(courseDetails);\n    setUserCourseDetails(courseDetails);\n    console.log(dashboardCount);\n  }\n\n  async function getUserTaskDetails() {\n    const taskDetails = await fetch(`${API}/tasks/userTasks/${userId}`, {\n      headers: {\n        \"x-auth-token\": token\n      }\n    }).then(data => data.json());\n    const allTaskDetails = await fetch(`${API}/tasks/getAllTasks`, {\n      headers: {\n        \"x-auth-token\": token\n      }\n    }).then(data => data.json());\n    const taskStatus = [{\n      status: \"Completed\",\n      count: taskDetails.length\n    }, {\n      status: \"Not Started\",\n      count: allTaskDetails.length - taskDetails.length\n    }];\n    setUserTaskDetails(taskStatus);\n    console.log(\"taskStatus\", taskStatus);\n  }\n\n  async function getAllCount() {\n    const count = await fetch(`${API}/count/getAllCount`, {\n      headers: {\n        \"x-auth-token\": token\n      }\n    }).then(data => data.json());\n    console.log(\"count\", count);\n    setDashboardCount(count);\n  }\n\n  function consolidateCourseStatus(courseDetails) {\n    // let status = {completed : 0, inProgress : 0, notStarted : 0};\n    let dashBoardStatus = [{\n      status: 'Completed',\n      count: 0\n    }, {\n      status: \"In Progress\",\n      count: 0\n    }, {\n      status: \"Not Started\",\n      count: 0\n    }];\n\n    for (var i = 0; i < courseDetails.length; i++) {\n      if (courseDetails[i].percentageCompletion === 0) {\n        dashBoardStatus[2][\"count\"] = dashBoardStatus[2][\"count\"] + 1;\n      } else if (courseDetails[i].percentageCompletion === 100) {\n        dashBoardStatus[0][\"count\"] = dashBoardStatus[0][\"count\"] + 1;\n      } else {\n        dashBoardStatus[1][\"count\"] = dashBoardStatus[1][\"count\"] + 1;\n      }\n    }\n\n    ;\n    console.log(\"dashBoardStatus\", dashBoardStatus);\n    setCourseStatus(dashBoardStatus);\n  }\n\n  return localStorage.getItem(\"user\") ? /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"dashBoardContainer\",\n    children: [/*#__PURE__*/_jsxDEV(DashboardCard, {\n      dashboardCount: dashboardCount\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"courseStatusCharts\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Course Completion Status\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"courseChartWrapper\",\n        children: [/*#__PURE__*/_jsxDEV(CourseBarChart, {\n          userCourseDetails: userCourseDetails\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 21\n        }, this), courseStatus && /*#__PURE__*/_jsxDEV(PieRechartComponent, {\n          userTaskDetails: courseStatus\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 38\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"taskChartWrapper\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Task Completion Status\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(PieRechartComponent, {\n        userTaskDetails: userTaskDetails,\n        type: \"task\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 9\n  }, this) : /*#__PURE__*/_jsxDEV(Navigate, {\n    to: \"/login\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 100,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Dashboard, \"eUGSXTaoenTvXmSOO4mxB7xLD3g=\");\n\n_c = Dashboard;\n\nvar _c;\n\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"names":["Navigate","Route","Routes","useEffect","useState","API","CourseBarChart","PieRechartComponent","DashboardCard","Dashboard","userCourseDetails","setUserCourseDetails","userTaskDetails","setUserTaskDetails","dashboardCount","setDashboardCount","courseStatus","setCourseStatus","userDetails","localStorage","getItem","JSON","parse","userId","userName","token","getUserCourseDetails","getUserTaskDetails","getAllCount","courseDetails","fetch","headers","then","data","json","console","log","consolidateCourseStatus","taskDetails","allTaskDetails","taskStatus","status","count","length","dashBoardStatus","i","percentageCompletion"],"sources":["/Users/de1uze/Desktop/capstone_final/Zenclass-Dashboard-frontend/src/containers/Dashboard/index.js"],"sourcesContent":["import { Navigate, Route, Routes } from \"react-router-dom\";\nimport { useEffect, useState } from \"react\";\nimport { API } from \"../../global\";\nimport { CourseBarChart } from \"./CourseBarChart\";\nimport { PieRechartComponent } from \"./CoursePieChart\";\n\n\nimport \"./dashboard.css\";\nimport { DashboardCard } from \"./Cards\";\n\nexport function Dashboard(){\n\n    const [userCourseDetails, setUserCourseDetails] = useState([]);\n    const [userTaskDetails, setUserTaskDetails] = useState([]);\n    const [dashboardCount , setDashboardCount] = useState({});\n    const [courseStatus , setCourseStatus] = useState([]);\n\n    let userDetails = localStorage.getItem(\"user\");\n    userDetails = userDetails && JSON.parse(userDetails);\n    const userId = userDetails.userId;\n    const userName = userDetails.userName;\n    const token = userDetails.token;\n\n\n    useEffect(()=>{\n        getUserCourseDetails();\n        getUserTaskDetails();\n        getAllCount();\n    },[])\n\n    async function getUserCourseDetails(){\n        const courseDetails = await fetch(`${API}/courses/userCourses/${userId}`,{\n            headers: {\"x-auth-token\" : token }\n        }).then((data)=>data.json());\n        console.log(\"courseDetails\",courseDetails);\n        consolidateCourseStatus(courseDetails);\n        setUserCourseDetails(courseDetails);\n        console.log(dashboardCount);\n    }\n\n    async function getUserTaskDetails(){\n        const taskDetails = await fetch(`${API}/tasks/userTasks/${userId}`,{\n            headers: {\"x-auth-token\" : token }\n        }).then((data)=>data.json());\n        const allTaskDetails = await fetch(`${API}/tasks/getAllTasks`,{\n            headers: {\"x-auth-token\" : token }\n        }).then((data)=>data.json());\n        const taskStatus = [{status : \"Completed\", count : taskDetails.length},{status : \"Not Started\", count : allTaskDetails.length-taskDetails.length}];\n        setUserTaskDetails(taskStatus);\n        console.log(\"taskStatus\",taskStatus);\n    }\n\n    async function getAllCount(){\n        const count = await fetch(`${API}/count/getAllCount`,{\n            headers: {\"x-auth-token\" : token }\n        }).then((data)=>data.json());\n        console.log(\"count\",count);\n        setDashboardCount(count);\n    }\n    \n\n    function consolidateCourseStatus(courseDetails){\n\n        // let status = {completed : 0, inProgress : 0, notStarted : 0};\n        let dashBoardStatus = [{status: 'Completed', count : 0}, {status: \"In Progress\", count : 0}, {status: \"Not Started\", count : 0}]\n\n        for(var i=0; i<courseDetails.length; i++){\n            if(courseDetails[i].percentageCompletion === 0){\n                dashBoardStatus[2][\"count\"] = dashBoardStatus[2][\"count\"] + 1;\n            } else if(courseDetails[i].percentageCompletion === 100){\n                dashBoardStatus[0][\"count\"] = dashBoardStatus[0][\"count\"] + 1;\n            } else{\n                dashBoardStatus[1][\"count\"] = dashBoardStatus[1][\"count\"] + 1;\n            }\n        };\n\n        console.log(\"dashBoardStatus\",dashBoardStatus);\n        setCourseStatus(dashBoardStatus);\n    }\n\n    \n\n    return localStorage.getItem(\"user\") ? (\n        <div className='dashBoardContainer'>\n            <DashboardCard dashboardCount={dashboardCount}/>\n            <div className=\"courseStatusCharts\">\n                <h2>Course Completion Status</h2>\n                <div className='courseChartWrapper'>\n                    <CourseBarChart userCourseDetails={userCourseDetails} />\n                    {courseStatus && <PieRechartComponent userTaskDetails={courseStatus}/>}\n                </div>\n            </div>\n                <div className=\"taskChartWrapper\">\n                <h2>Task Completion Status</h2>\n                <PieRechartComponent userTaskDetails = {userTaskDetails} type=\"task\"/>\n            </div>\n        </div>\n    ) :\n    (\n        <Navigate to =\"/login\" />\n    );\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}